



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>EDA - DEEP (Data Education and Exploration Project)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#exploratory-data-analysis" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="DEEP (Data Education and Exploration Project)" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              DEEP (Data Education and Exploration Project)
            </span>
            <span class="md-header-nav__topic">
              
                EDA
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ricedatasci/deep/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ricedatasci/deep
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="DEEP (Data Education and Exploration Project)" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    DEEP (Data Education and Exploration Project)
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ricedatasci/deep/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ricedatasci/deep
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Curriculum
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Curriculum
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/exercise/" title="Exercise" class="md-nav__link">
      Exercise
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/exercise/" title="Exercise" class="md-nav__link">
      Exercise
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../introduction-to-pandas/" title="Pandas" class="md-nav__link">
      Pandas
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4" checked>
    
    <label class="md-nav__link" for="nav-2-4">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dataset/" title="US Senate Dataset" class="md-nav__link">
      US Senate Dataset
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        EDA
      </label>
    
    <a href="./" title="EDA" class="md-nav__link md-nav__link--active">
      EDA
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#describe-candidates" class="md-nav__link">
    describe candidates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#does-this-dataset-just-have-the-winning-candidates-or-all" class="md-nav__link">
    Does this dataset just have the winning candidates or all?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#party-popularity-over-time" class="md-nav__link">
    party popularity over time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../contributors/" title="Contributors" class="md-nav__link">
      Contributors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#describe-candidates" class="md-nav__link">
    describe candidates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#does-this-dataset-just-have-the-winning-candidates-or-all" class="md-nav__link">
    Does this dataset just have the winning candidates or all?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#party-popularity-over-time" class="md-nav__link">
    party popularity over time
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ricedatasci/deep/edit/master/docs/curriculum/examples/eda.ipynb" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="exploratory-data-analysis">Exploratory Data Analysis <a href="https://mybinder.org/v2/gh/ricedatasci/deep/master?filepath=docs%2Fcurriculum%2Fdocs%2Fcurriculum%2Fexamples%2Feda.ipynb"><img alt="Binder" src="https://mybinder.org/badge_logo.svg" /></a><a class="headerlink" href="#exploratory-data-analysis" title="Permanent link">&para;</a></h1>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.dpi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">150</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.dpi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">150</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/PEJ5QU/XXQCIK&quot;</span>
<span class="n">candidates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

<h2 id="describe-candidates">describe <code>candidates</code><a class="headerlink" href="#describe-candidates" title="Permanent link">&para;</a></h2>
<p>It's important to understand a few fundamentals about our data before you start work with it, including what information it contains, how large it is, and how the values are generally distributed.</p>
<div class="codehilite"><pre><span></span><span class="n">candidates</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>state</th>
      <th>state_po</th>
      <th>state_fips</th>
      <th>state_cen</th>
      <th>state_ic</th>
      <th>office</th>
      <th>district</th>
      <th>stage</th>
      <th>special</th>
      <th>candidate</th>
      <th>party</th>
      <th>writein</th>
      <th>mode</th>
      <th>candidatevotes</th>
      <th>totalvotes</th>
      <th>unofficial</th>
      <th>version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1976</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>4</td>
      <td>86</td>
      <td>61</td>
      <td>US Senate</td>
      <td>statewide</td>
      <td>gen</td>
      <td>False</td>
      <td>Sam Steiger</td>
      <td>republican</td>
      <td>False</td>
      <td>total</td>
      <td>321236</td>
      <td>741210</td>
      <td>False</td>
      <td>20171011.0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1976</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>4</td>
      <td>86</td>
      <td>61</td>
      <td>US Senate</td>
      <td>statewide</td>
      <td>gen</td>
      <td>False</td>
      <td>Wm. Mathews Feighan</td>
      <td>independent</td>
      <td>False</td>
      <td>total</td>
      <td>1565</td>
      <td>741210</td>
      <td>False</td>
      <td>20171011.0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1976</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>4</td>
      <td>86</td>
      <td>61</td>
      <td>US Senate</td>
      <td>statewide</td>
      <td>gen</td>
      <td>False</td>
      <td>Dennis DeConcini</td>
      <td>democrat</td>
      <td>False</td>
      <td>total</td>
      <td>400334</td>
      <td>741210</td>
      <td>False</td>
      <td>20171011.0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1976</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>4</td>
      <td>86</td>
      <td>61</td>
      <td>US Senate</td>
      <td>statewide</td>
      <td>gen</td>
      <td>False</td>
      <td>Allan Norwitz</td>
      <td>libertarian</td>
      <td>False</td>
      <td>total</td>
      <td>7310</td>
      <td>741210</td>
      <td>False</td>
      <td>20171011.0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1976</td>
      <td>Arizona</td>
      <td>AZ</td>
      <td>4</td>
      <td>86</td>
      <td>61</td>
      <td>US Senate</td>
      <td>statewide</td>
      <td>gen</td>
      <td>False</td>
      <td>Bob Field</td>
      <td>independent</td>
      <td>False</td>
      <td>total</td>
      <td>10765</td>
      <td>741210</td>
      <td>False</td>
      <td>20171011.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>Looks like we have some rows with a few missing candidate / party fields.</p>
<div class="codehilite"><pre><span></span><span class="n">candidates</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>year              3421
state             3421
state_po          3421
state_fips        3421
state_cen         3421
state_ic          3421
office            3421
district          3421
stage             3421
special           3421
candidate         3011
party             2858
writein           3421
mode              3421
candidatevotes    3421
totalvotes        3421
unofficial        3421
version           3420
dtype: int64
</pre></div>


<p>This dataset only contains information on US Senate elections.</p>
<div class="codehilite"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">office</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>US Senate    3421
Name: office, dtype: int64
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">party</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span>republican           756
democrat             748
libertarian          341
independent          256
green                 81
socialist workers     65
natural law           45
constitution          41
reform                36
none                  27
Name: party, dtype: int64
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>state_fips</th>
      <th>state_cen</th>
      <th>state_ic</th>
      <th>candidatevotes</th>
      <th>totalvotes</th>
      <th>version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>count</td>
      <td>3421.000000</td>
      <td>3421.000000</td>
      <td>3421.000000</td>
      <td>3421.000000</td>
      <td>3.421000e+03</td>
      <td>3.421000e+03</td>
      <td>3.420000e+03</td>
    </tr>
    <tr>
      <td>mean</td>
      <td>1998.862321</td>
      <td>29.037708</td>
      <td>52.910552</td>
      <td>38.989769</td>
      <td>4.052304e+05</td>
      <td>2.179958e+06</td>
      <td>2.017186e+07</td>
    </tr>
    <tr>
      <td>std</td>
      <td>12.669946</td>
      <td>15.430661</td>
      <td>26.035517</td>
      <td>22.740840</td>
      <td>7.722098e+05</td>
      <td>2.114724e+06</td>
      <td>3.936505e+03</td>
    </tr>
    <tr>
      <td>min</td>
      <td>1976.000000</td>
      <td>1.000000</td>
      <td>11.000000</td>
      <td>1.000000</td>
      <td>1.000000e+00</td>
      <td>1.000000e+00</td>
      <td>2.017101e+07</td>
    </tr>
    <tr>
      <td>25%</td>
      <td>1988.000000</td>
      <td>17.000000</td>
      <td>33.000000</td>
      <td>21.000000</td>
      <td>4.745000e+03</td>
      <td>6.407020e+05</td>
      <td>2.017101e+07</td>
    </tr>
    <tr>
      <td>50%</td>
      <td>2000.000000</td>
      <td>29.000000</td>
      <td>54.000000</td>
      <td>41.000000</td>
      <td>5.738200e+04</td>
      <td>1.541036e+06</td>
      <td>2.017101e+07</td>
    </tr>
    <tr>
      <td>75%</td>
      <td>2010.000000</td>
      <td>41.000000</td>
      <td>74.000000</td>
      <td>56.000000</td>
      <td>4.766040e+05</td>
      <td>2.802641e+06</td>
      <td>2.017101e+07</td>
    </tr>
    <tr>
      <td>max</td>
      <td>2018.000000</td>
      <td>56.000000</td>
      <td>95.000000</td>
      <td>82.000000</td>
      <td>7.864624e+06</td>
      <td>1.257851e+07</td>
      <td>2.019011e+07</td>
    </tr>
  </tbody>
</table>
</div>

<h4 id="does-this-dataset-just-have-the-winning-candidates-or-all">Does this dataset just have the winning candidates or all?<a class="headerlink" href="#does-this-dataset-just-have-the-winning-candidates-or-all" title="Permanent link">&para;</a></h4>
<p>To get this, we have to think about how to uniquely key an election.  Since we know that we only have US Senate races, we should be able to get this by grouping on year and state of a given election.  Then we can simply count the number of records to determine the number of participants we have recorded.</p>
<p>Below, we show that an election generally spans multiple records in this dataframe.  How can we index the winners?  Note that we will actually be indexing the winner of the popular vote in each election.</p>
<div class="codehilite"><pre><span></span><span class="n">candidates</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">party</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>year  state        
1976  Arizona          5
      California       5
      Connecticut      3
      Delaware         5
      Florida          2
                      ..
2018  Virginia         3
      Washington       2
      West Virginia    3
      Wisconsin        2
      Wyoming          3
Name: party, Length: 740, dtype: int64
</pre></div>


<h3 id="party-popularity-over-time">party popularity over time<a class="headerlink" href="#party-popularity-over-time" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="n">mostvotes</span> <span class="o">=</span> <span class="n">candidates</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">candidatevotes</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>

<span class="c1"># candidates that had the most votes in their election</span>
<span class="c1"># &quot;fancy&quot; indexing, mostvotes.values holds indices of rows we want to select</span>
<span class="n">popular</span> <span class="o">=</span> <span class="n">candidates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">mostvotes</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

<span class="c1"># get % of parties which had most votes per year</span>
<span class="n">parties</span> <span class="o">=</span> <span class="n">popular</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">party</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># iterate through the parties and plot a line for each</span>
<span class="n">gb</span> <span class="o">=</span> <span class="n">parties</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;party&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">gb</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
    <span class="n">group_df</span> <span class="o">=</span> <span class="n">gb</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
    <span class="n">group_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;proportion of party members winning popular vote&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;percentage of winning candidates&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>/home/gvacaliuc/.virtualenvs/deep/lib/python3.6/site-packages/pandas/plotting/_matplotlib/core.py:1085: UserWarning: Attempting to set identical left == right == 0.0 results in singular transformations; automatically expanding.
  ax.set_xlim(left, right)





&lt;matplotlib.legend.Legend at 0x7efc73d33908&gt;
</pre></div>


<p><img alt="png" src="output_16_2.png" /></p>
<div class="codehilite"><pre><span></span><span class="n">mostvotes</span> <span class="o">=</span> <span class="n">candidates</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">candidatevotes</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>

<span class="c1"># candidates that had the most votes in their election</span>
<span class="c1"># &quot;fancy&quot; indexing, mostvotes.values holds indices of rows we want to select</span>
<span class="n">popular</span> <span class="o">=</span> <span class="n">candidates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">mostvotes</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

<span class="c1"># get % of parties which had most votes per year</span>
<span class="n">parties</span> <span class="o">=</span> <span class="n">popular</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">party</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># iterate through the parties and plot a line for each</span>
<span class="n">gb</span> <span class="o">=</span> <span class="n">parties</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;party&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;republican&quot;</span><span class="p">,</span> <span class="s2">&quot;democrat&quot;</span><span class="p">]:</span>
    <span class="n">group_df</span> <span class="o">=</span> <span class="n">gb</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
    <span class="n">group_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">group</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;proportion of party members winning popular vote&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;percentage of winning candidates&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span>&lt;matplotlib.legend.Legend at 0x7efc738b9470&gt;
</pre></div>


<p><img alt="png" src="output_17_1.png" /></p>
<div class="codehilite"><pre><span></span><span class="c1"># how many write ins are there??</span>

<span class="n">candidates</span><span class="o">.</span><span class="n">writein</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="c1"># how many write ins??</span>

<span class="n">df</span><span class="o">.</span><span class="n">writein</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Proportion of Write-In Candidates&quot;</span><span class="p">)</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="c1"># what about through time?</span>

<span class="n">writeins</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">writein</span> \
                <span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> \
                <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">&quot;writein&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ratio&quot;</span><span class="p">)</span>
<span class="n">writeins</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="n">writeins</span><span class="p">[</span><span class="n">writeins</span><span class="p">[</span><span class="s2">&quot;writein&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">ratio</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Proportion of US Senate Write-Ins&quot;</span><span class="p">)</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../dataset/" title="US Senate Dataset" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                US Senate Dataset
              </span>
            </div>
          </a>
        
        
          <a href="../../../contributors/" title="Contributors" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Contributors
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/ricedatasci" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>